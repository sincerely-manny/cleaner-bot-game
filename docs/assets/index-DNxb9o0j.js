var e=Object.defineProperty,t=(t,s,i)=>(((t,s,i)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i})(t,"symbol"!=typeof s?s+"":s,i),i);import{p as s}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const i=375,a=812,r={listen:e=>{window.addEventListener("message",(function(t){try{const s=JSON.parse(t.data);e&&e(s)}catch(s){}}))},send:({type:e,payload:t})=>{var s;const i={type:e,payload:t};null==(s=window.ReactNativeWebView)||s.postMessage(JSON.stringify(i))},redirectLogs:()=>{window.ReactNativeWebView&&["log","error","warn","info"].forEach((function(e){const t=console[e];console[e]=function(){t.apply(console,Array.from(arguments)),r.send({type:"log",payload:{level:e,message:Array.from(arguments).join(" ")}})}}))}};class o extends s.Scene{constructor(){super("Game"),t(this,"ground"),t(this,"character"),t(this,"coin"),t(this,"coinText"),t(this,"cursors"),t(this,"touch"),t(this,"puddle"),t(this,"charIsOverlappingPuddle"),t(this,"meteors",[]),t(this,"score",0),t(this,"nativeEvents",r),t(this,"gameOver",!1),t(this,"nativeEnentCallback",(e=>{"set-state"===e.type&&("play"===e.payload&&(this.scene.resume(),this.nativeEvents.send({type:"declare-state",payload:"play"})),"pause"===e.payload&&(this.scene.pause(),this.nativeEvents.send({type:"declare-state",payload:"pause"})),"restart"===e.payload&&(this.scene.restart(),this.nativeEvents.send({type:"declare-state",payload:"play"})))})),this.charIsOverlappingPuddle=!1,this.nativeEvents.redirectLogs(),this.nativeEvents.listen(this.nativeEnentCallback)}create(){var e,t,s,r;this.add.image(187.5,406,"background").setScale(.75),this.add.image(187.5,770,"horizon").setOrigin(.5,1),this.ground=this.physics.add.image(187.5,a,"ground"),this.ground.setOrigin(.5,1).setImmovable(!0).setVelocityX(-300).setSize(1706,5).setOffset(0,60),this.character=this.physics.add.sprite(87.5,552,"character"),this.character.setOrigin(.5,1).setBounce(.1).setGravityY(500).setFriction(0,0).setDepth(1),null==(e=this.character.body)||e.setSize(70,90).setOffset(65,80),this.tweens.add({targets:this.character,angle:{from:-5,to:5},rotation:{from:-.03,to:.03},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.anims.create({key:"idle",frames:[{key:"character",frame:0}]}),this.anims.create({key:"up",frames:[{key:"character",frame:1}]}),this.anims.create({key:"down",frames:[{key:"character",frame:2}]}),this.anims.create({key:"cleaning",frames:[{key:"character",frame:3}]}),this.physics.world.setBounds(0,0,i,742),this.character.setCollideWorldBounds(!0),this.coin=this.physics.add.image(0,0,"coin"),this.coin.setOrigin(.5,.5),this.coin.visible=!1,this.coinText=this.add.text(400,500,"+1",{fontSize:"22px",color:"#ffffff",fontFamily:"SF Pro Display Semibold"}),this.coinText.setOrigin(1,.5),this.coinText.visible=!1,this.cursors=null==(t=this.input.keyboard)?void 0:t.createCursorKeys(),this.touch=this.input.pointer1,this.input.on("pointerdown",(()=>{this.goUp()})),this.input.on("pointerup",(()=>{this.goDown()})),null==(s=this.cursors)||s.space.on("down",(()=>{this.goUp()})),null==(r=this.cursors)||r.space.on("up",(()=>{this.goDown()}))}goUp(){this.character.setAccelerationY(-300),this.character.setVelocityY(-500)}goDown(){this.character.setAccelerationY(0),this.character.setVelocityY(0)}update(){var e,t;const s=null==(e=this.character.body)?void 0:e.velocity.y;s&&s<-100?this.character.anims.play("up"):s&&s>100?this.character.anims.play("down"):this.charIsOverlappingPuddle?this.character.anims.play("cleaning",!0):this.character.anims.play("idle");const a=null==(t=this.ground.body)?void 0:t.position;if(a&&a.x<-1250){this.ground.setX(400);const e=50;Math.round(100*Math.random())<e&&(this.puddle&&this.puddle.destroy(),this.puddle=this.physics.add.image(i,712,"puddle"),this.puddle.setOrigin(0,1).setFriction(1).setGravityY(500).setSize(70,40),this.physics.add.collider(this.ground,this.puddle),this.physics.add.overlap(this.character,this.puddle,(()=>{this.charIsOverlappingPuddle||(this.charIsOverlappingPuddle=!0,this.tweens.add({targets:this.puddle,alpha:{from:1,to:0},duration:500,repeat:0}),this.coin.visible=!0,this.coin.setPosition(this.character.x,this.character.y-70),this.coinText.visible=!0,this.coinText.setPosition(this.coin.x-18,this.coin.y),this.tweens.add({targets:[this.coin,this.coinText],y:"-=200",alpha:.5,duration:2e3,ease:"Power2",onComplete:()=>{this.coin.visible=!1,this.coinText.visible=!1,this.coin.setAlpha(1),this.coinText.setAlpha(1)}}),this.score+=1,this.nativeEvents.send({type:"set-score",payload:this.score}))})))}if(this.charIsOverlappingPuddle&&!this.physics.overlap(this.character,this.puddle)&&(this.charIsOverlappingPuddle=!1),Math.round(100*Math.random())<1){const e=this.physics.add.image(i,512*Math.random()+200,"meteor");e.setOrigin(0,.5).setVelocityX(0-(200*Math.random()+100)).body.setSize(40,40,!0).setOffset(20,20),this.meteors.push(e),this.physics.add.collider(this.character,e,(()=>{this.character.tint=16711680,this.character.setTint(16733525),this.scene.pause(),this.gameOver=!0,this.nativeEvents.send({type:"declare-state",payload:"game-over"})}))}this.meteors.forEach((e=>{var t;(null==(t=e.body)?void 0:t.position.x)&&e.body.position.x<-100&&e.destroy()}))}}class n extends s.Scene{constructor(){super("Preload")}preload(){this.load.setPath("assets"),this.load.image("background","bg.png"),this.load.svg("ground","ground.svg"),this.load.svg("horizon","horizon.svg"),this.load.svg("meteor","meteor.svg"),this.load.spritesheet("character","char.svg",{frameWidth:200,frameHeight:200}),this.load.svg("puddle","puddle.svg"),this.load.svg("coin","coin.svg")}create(){this.scene.start("Game")}}const c={type:Phaser.AUTO,width:i,height:a,parent:"game-container",backgroundColor:"#44ADFA",scale:{mode:Phaser.Scale.ENVELOP,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:0}}},scene:[n,o]};new s.Game(c);
